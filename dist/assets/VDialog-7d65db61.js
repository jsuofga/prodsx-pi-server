import{m as $,V as x}from"./VOverlay-107bef8f.js";import{a as v,d as A,s as E,b as F,g as O,n as C,f as L}from"./forwardRefs-e658ad70.js";import{n as D,B as h,D as y,T as w,p as B,x as q,r as I,ai as R,w as V,c as M,E as k,af as N}from"./index-8ad2129a.js";import{u as W}from"./scopeId-30d22c2a.js";import{V as X}from"./VBtn-13690100.js";import{u as Y}from"./VContainer-0b5af25b.js";const j=B({target:[Object,Array]},"v-dialog-transition"),z=D()({name:"VDialogTransition",props:j(),setup(n,d){let{slots:e}=d;const l={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,i){var c;await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),t.style.visibility="";const{x:f,y:m,sx:s,sy:a,speed:o}=b(n.target,t),u=v(t,[{transform:`translate(${f}px, ${m}px) scale(${s}, ${a})`,opacity:0},{}],{duration:225*o,easing:A});(c=P(t))==null||c.forEach(r=>{v(r,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*o,easing:E})}),u.finished.then(()=>i())},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,i){var c;await new Promise(r=>requestAnimationFrame(r));const{x:f,y:m,sx:s,sy:a,speed:o}=b(n.target,t);v(t,[{},{transform:`translate(${f}px, ${m}px) scale(${s}, ${a})`,opacity:0}],{duration:125*o,easing:F}).finished.then(()=>i()),(c=P(t))==null||c.forEach(r=>{v(r,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*o,easing:E})})},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>n.target?h(w,y({name:"dialog-transition"},l,{css:!1}),e):h(w,{name:"dialog-transition"},e)}});function P(n){var e;const d=(e=n.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:e.children;return d&&[...d]}function b(n,d){const e=O(n),l=C(d),[t,i]=getComputedStyle(d).transformOrigin.split(" ").map(T=>parseFloat(T)),[f,m]=getComputedStyle(d).getPropertyValue("--v-overlay-anchor-origin").split(" ");let s=e.left+e.width/2;f==="left"||m==="left"?s-=e.width/2:(f==="right"||m==="right")&&(s+=e.width/2);let a=e.top+e.height/2;f==="top"||m==="top"?a-=e.height/2:(f==="bottom"||m==="bottom")&&(a+=e.height/2);const o=e.width/l.width,u=e.height/l.height,c=Math.max(1,o,u),r=o/c||0,g=u/c||0,p=l.width*l.height/(window.innerWidth*window.innerHeight),S=p>.12?Math.min(1.5,(p-.12)*10+1):1;return{x:s-(t+l.left),y:a-(i+l.top),sx:r,sy:g,speed:S}}const H=B({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...$({origin:"center center",scrollStrategy:"block",transition:{component:z},zIndex:2400})},"VDialog"),_=D()({name:"VDialog",props:H(),emits:{"update:modelValue":n=>!0},setup(n,d){let{slots:e}=d;const l=q(n,"modelValue"),{scopeId:t}=W(),i=I();function f(s){var u,c;const a=s.relatedTarget,o=s.target;if(a!==o&&((u=i.value)!=null&&u.contentEl)&&((c=i.value)!=null&&c.globalTop)&&![document,i.value.contentEl].includes(o)&&!i.value.contentEl.contains(o)){const r=N(i.value.contentEl);if(!r.length)return;const g=r[0],p=r[r.length-1];a===g?p.focus():g.focus()}}R&&V(()=>l.value&&n.retainFocus,s=>{s?document.addEventListener("focusin",f):document.removeEventListener("focusin",f)},{immediate:!0}),V(l,async s=>{var a,o;await k(),s?(a=i.value.contentEl)==null||a.focus({preventScroll:!0}):(o=i.value.activatorEl)==null||o.focus({preventScroll:!0})});const m=M(()=>y({"aria-haspopup":"dialog","aria-expanded":String(l.value)},n.activatorProps));return Y(()=>{const s=x.filterProps(n);return h(x,y({ref:i,class:["v-dialog",{"v-dialog--fullscreen":n.fullscreen,"v-dialog--scrollable":n.scrollable},n.class],style:n.style},s,{modelValue:l.value,"onUpdate:modelValue":a=>l.value=a,"aria-modal":"true",activatorProps:m.value,role:"dialog"},t),{activator:e.activator,default:function(){for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return h(X,{root:"VDialog"},{default:()=>{var c;return[(c=e.default)==null?void 0:c.call(e,...o)]}})}})}),L({},i)}});export{_ as V,z as a};
