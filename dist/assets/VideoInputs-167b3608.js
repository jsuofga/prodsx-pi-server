import{_ as g,G as p,H as t,N as c,O as S,R as r,P as f,I as i,W as h,B as n,J as a,M as w,X as R,F as V,V as A}from"./index-727bb80f.js";import{g as y}from"./VBtn-6fcf6571.js";import{V as b}from"./VChip-c59ed7df.js";import{V as I}from"./VAvatar-701bf9fb.js";import{V as C}from"./VContainer-01d49131.js";import{C as P}from"./VOverlay-c8e875b1.js";import{V as m}from"./VRow-0cbb5f08.js";import{V as X}from"./VSnackbar-722c822b.js";import{V as B}from"./VCol-a35c22e4.js";import"./VProgressCircular-7762ce8f.js";import"./index-f40cfb2e.js";import"./transition-fac92ff7.js";import"./forwardRefs-e658ad70.js";import"./scopeId-525328cc.js";const T={name:"SourceTX",props:["txIndex","txLabel","txIP","showRemoteBtn"],components:{},setup(){return{stateStore:p()}},data:()=>({bg_image:""}),methods:{selectTX(s){let o="";const l=s.split(".");let e=l[l.length-1];o=e.length==1?"00"+e:"0"+e,this.stateStore.txSelected=o,console.log(this.stateStore.vwSelected),this.stateStore.switch1RxOnly==!0?(this.stateStore.switchRX(o),this.stateStore.snackbar=!0):this.stateStore.switchAllRx==!0?(this.stateStore.switchAllRX(o),this.stateStore.snackbar=!0):(this.stateStore.switchVW(o),this.stateStore.snackbar=!0)},selectRemote(){this.stateStore.remoteSelectedIndex=this.txIndex,localStorage.setItem("remoteSelectedIndex",this.stateStore.remoteSelectedIndex),this.$router.push("/remotecontrol")},changeBackgroundImage(){this.bg_image=`http://${this.txIP}/capture.jpg?`+Date.now()}},created(){fetch(`http://${this.txIP}/cgi-bin/query.cgi?cmd=capture_pic &`),this.snapShot=setInterval(this.changeBackgroundImage,2500)},beforeUnmount(){console.log("stop snapshot"),fetch(`http://${this.txIP}/cgi-bin/query.cgi?cmd=killall capture_pic`),clearInterval(this.snapShot)}},L={id:"tx-label"},O=["src"];function j(s,o,l,e,v,d){return t(),c("button",{class:"button",onClick:o[1]||(o[1]=x=>d.selectTX(l.txIP))},[S(r(l.txLabel)+" -"+r(s.allowRemoteControl)+" ",1),f("div",L,r(l.txIP),1),f("img",{src:s.bg_image,width:"190","aspect-ratio":"16/9"},null,8,O),l.showRemoteBtn!=null?(t(),i(y,{key:0,id:"remote-select",icon:"mdi-remote",color:"blue",onClick:o[0]||(o[0]=x=>d.selectRemote())})):h("",!0)])}const q=g(T,[["render",j],["__scopeId","data-v-402b84c0"]]);const D={name:"PreviewRX",props:[],components:{},setup(){return{stateStore:p()}},data:()=>({bg_image:""}),methods:{changeBackgroundImage(){this.bg_image=`http://${this.stateStore.rxSelected}/capture.jpg?`+Date.now()}},created(){console.log("start snapshot"),this.changeBackgroundImage(),fetch(`http://${this.stateStore.rxSelected}/cgi-bin/query.cgi?cmd=capture_pic &`),this.snapShot=setInterval(this.changeBackgroundImage,2500)},mounted(){fetch(`http://${this.stateStore.rxSelected}/cgi-bin/query.cgi?cmd=capture_pic &`)},beforeUnmount(){console.log("stop snapshot"),fetch(`http://${this.stateStore.rxSelected}/cgi-bin/query.cgi?cmd=killall capture_pic`),clearInterval(this.snapShot)}},N={key:0,id:"preview-container"},U={key:1};function F(s,o,l,e,v,d){return e.stateStore.vwTypeSelected!="1x3"?(t(),c("div",N,[n(I,{class:"preview",cover:"",src:s.bg_image},{default:a(()=>[e.stateStore.rxSelectedLabel!=""?(t(),i(b,{key:0,id:"rx-label"},{default:a(()=>[S(r(e.stateStore.rxSelectedLabel),1)]),_:1})):h("",!0)]),_:1},8,["src"])])):(t(),c("div",U,[n(I,{class:"preview-rotate",cover:"",src:s.bg_image},{default:a(()=>[e.stateStore.rxSelectedLabel!=""?(t(),i(b,{key:0,id:"rx-label"},{default:a(()=>[S(r(e.stateStore.rxSelectedLabel),1)]),_:1})):h("",!0)]),_:1},8,["src"])]))}const W=g(D,[["render",F],["__scopeId","data-v-b1f2d1dc"]]);const z={name:"VideoInputs",components:{SourceTX:q,PreviewRX:W},setup(){return{stateStore:p()}},computed:{showSelectRemoteControl(){return Array.from({length:this.stateStore.iTachUnits.length*3},(s,o)=>o+1)}},data:()=>({active:!1}),methods:{onClickOutside(){this.stateStore.vwSelected==""?this.$router.push("/zoneview"):this.$router.push("/videowallview")}},created(){},beforeUnmount(){}},E={id:"inner-div"},G={key:0},H={key:1},J={key:2},M={key:3};function K(s,o,l,e,v,d){const x=w("PreviewRX"),k=w("SourceTX");return t(),i(C,{id:"container",fluid:"",class:"fill-height d-flex flex-column"},{default:a(()=>[R((t(),c("div",E,[n(m,{id:"rx-preview-container",class:"d-flex justify-center text-white"},{default:a(()=>[n(x,{rxIP:e.stateStore.rxSelected},null,8,["rxIP"])]),_:1}),n(X,{modelValue:e.stateStore.snackbar,"onUpdate:modelValue":o[0]||(o[0]=u=>e.stateStore.snackbar=u),timeout:3e3,color:"blue"},{default:a(()=>[e.stateStore.vwSelected==""&&e.stateStore.switchAllRx==!1?(t(),c("div",G,r(` ${e.stateStore.rxSelectedLabel} to ${e.stateStore.txAssignments[parseInt(e.stateStore.txSelected)-1].name} `),1)):e.stateStore.vwSelected!=""&&e.stateStore.switch1RxOnly==!0&&e.stateStore.switchAllRx==!1?(t(),c("div",H,r(` ${e.stateStore.vwSelected} RX ${e.stateStore.rxSelected} to ${e.stateStore.txAssignments[parseInt(e.stateStore.txSelected)-1].name} `),1)):e.stateStore.vwSelected!=""&&e.stateStore.switch1RxOnly==!1&&e.stateStore.switchAllRx==!1?(t(),c("div",J,r(` ${e.stateStore.vwSelected} to ${e.stateStore.txAssignments[parseInt(e.stateStore.txSelected)-1].name} `),1)):e.stateStore.switchAllRx==!0?(t(),c("div",M,r(` All TV's to ${e.stateStore.txAssignments[parseInt(e.stateStore.txSelected)-1].name} `),1)):h("",!0),f("template",null,[n(y,{color:"white",variant:"text"})])]),_:1},8,["modelValue"]),e.stateStore.vwSelected==""&&e.stateStore.switchAllRx==!1?(t(),i(m,{key:0,id:"rx-label",class:"d-flex justify-center pa-6 myCol"},{default:a(()=>[S(" Select Video for - "+r(e.stateStore.rxSelectedLabel),1)]),_:1})):e.stateStore.vwSelected!=""&&e.stateStore.switchAllRx==!1?(t(),i(m,{key:1,id:"rx-label",class:"d-flex justify-center pa-6 myCol"},{default:a(()=>[S(" Select Video for - "+r(e.stateStore.vwSelected),1)]),_:1})):e.stateStore.switchAllRx==!0?(t(),i(m,{key:2,id:"rx-label",class:"d-flex justify-center pa-6 myCol"},{default:a(()=>[S(" Select Video for - All TV's ")]),_:1})):h("",!0),n(m,{class:"myRow d-flex align-center"},{default:a(()=>[(t(!0),c(V,null,A(e.stateStore.txAssignments,(u,_)=>(t(),i(B,{key:_,class:"d-flex justify-center pl-0"},{default:a(()=>[n(k,{txIndex:_,txLabel:e.stateStore.txAssignments[_].name,txIP:u.txId,showRemoteBtn:d.showSelectRemoteControl[_]},null,8,["txIndex","txLabel","txIP","showRemoteBtn"])]),_:2},1024))),128))]),_:1})])),[[P,d.onClickOutside]])]),_:1})}const de=g(z,[["render",K],["__scopeId","data-v-3116ca38"]]);export{de as default};
