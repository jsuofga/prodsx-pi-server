import{_ as w,G as g,H as n,I as c,J as a,B as d,P as s,O as m,R as f,W as p,N as y,V as C,F as V,a0 as k,S as I,U as b}from"./index-858ddb16.js";import{V as N}from"./VContainer-8c0a3fe1.js";import{V as L}from"./VRow-3720ea73.js";import{g as h}from"./VBtn-545e95a1.js";import{V as _}from"./VCol-4dd9dc05.js";import{V as S}from"./VChip-f06d2987.js";import{b as A}from"./VProgressCircular-baaadbd8.js";import{V as B}from"./VTable-93e89e8f.js";import"./index-79754f20.js";import"./VAvatar-2f6d40e7.js";const D={name:"DeviceList",components:{},setup(){return{stateStore:g()}},data:()=>({showSave:!1}),computed:{},methods:{openBrowser(r){window.open(`http://${r}`)},rescan(){location.reload()},async saveDeviceList(){const r=this.stateStore.serverURL;this.stateStore.nodeQueryList_dump.forEach((i,u)=>{if(i.is_host=="n"){let e={rxId:i.ip,name:"",zoneId:"",zone:"",vwName:"",vwType:""};this.stateStore.rxAssignments.some(o=>o.rxId===e.rxId)||this.stateStore.rxAssignments.push(e)}else if(i.is_host=="y"){let e={txId:i.ip,name:`Video${u+1}`};this.stateStore.txAssignments.some(o=>o.txId===e.txId)||this.stateStore.txAssignments.push(e)}}),await this.stateStore.rxAssignments.sort((i,u)=>{const e=i.rxId.split(".").map(Number),o=u.rxId.split(".").map(Number);for(let t=0;t<4;t++)if(e[t]!==o[t])return e[t]-o[t];return 0}),await this.stateStore.txAssignments.sort((i,u)=>{const e=i.txId.split(".").map(Number),o=u.txId.split(".").map(Number);for(let t=0;t<4;t++)if(e[t]!==o[t])return e[t]-o[t];return 0}),await fetch(`http://${r}/write/UserTvNames/${JSON.stringify(this.stateStore.rxAssignments)}`),await fetch(`http://${r}/write/UserInputNames/${JSON.stringify(this.stateStore.txAssignments)}`),this.$router.push("/")},cancel:function(){this.$router.push("/")}},async created(){this.stateStore.showSideMenu=!1,await this.stateStore.getNodeQuery(),this.stateStore.get_UserTvNames(),this.showSave=!0},beforeUnmount(){}},x=r=>(I("data-v-a2cccab4"),r=r(),b(),r),R={class:"d-flex justify-start my-3"},U=x(()=>s("div",{class:"d-flex justify-center"}," 1. Remove duplicate devices as indicated ",-1)),Q=x(()=>s("div",{class:"d-flex justify-center"}," 2. Repeat Device List Scan ",-1)),T=x(()=>s("thead",null,[s("tr",null,[s("th",null,"Device IP"),s("th",null,"MCU Version"),s("th",null,"Firmware Build"),s("th",null,"MAC")])],-1));function j(r,i,u,e,o,t){return n(),c(N,{id:"myContainer",fluid:""},{default:a(()=>[r.showSave?(n(),c(L,{key:0,class:"mx-3"},{default:a(()=>[d(_,null,{default:a(()=>[s("div",R,[d(h,{onClick:t.rescan,color:"blue"},{default:a(()=>[m("ReScan")]),_:1},8,["onClick"])])]),_:1}),e.stateStore.nodeQueryList_ip_duplicates.length!=0?(n(),c(_,{key:0,class:"d-flex flex-column justify-center text-red"},{default:a(()=>[U,Q]),_:1})):(n(),c(_,{key:1,class:"d-flex justify-center"},{default:a(()=>[d(S,{variant:"flat"},{default:a(()=>[m("TX + RX found = "+f(e.stateStore.nodeQueryList_dump.length),1)]),_:1})]),_:1})),d(_,{class:"myCols d-flex justify-end"},{default:a(()=>[d(h,{class:"mx-3",onClick:t.cancel,color:"red"},{default:a(()=>[m("Cancel")]),_:1},8,["onClick"]),e.stateStore.nodeQueryList_ip_duplicates.length==0?(n(),c(h,{key:0,class:"mx-3",onClick:t.saveDeviceList,color:"blue"},{default:a(()=>[m("SAVE")]),_:1},8,["onClick"])):p("",!0)]),_:1})]),_:1})):p("",!0),e.stateStore.showProgress?(n(),c(A,{key:1,id:"progress",indeterminate:"","model-value":"20",size:80,color:"blue"})):p("",!0),d(B,{id:"device-table"},{default:a(()=>[T,s("tbody",null,[(n(!0),y(V,null,C(e.stateStore.nodeQueryList_dump,(l,v)=>(n(),y("tr",{key:v},[s("td",null,[d(S,{class:k(["is_receiver",{is_host:l.is_host=="y"}]),onClick:z=>t.openBrowser(l.ip),variant:"outlined"},{default:a(()=>[m(f(l.is_host=="y"?"TX":"RX")+"-"+f(l.ip),1)]),_:2},1032,["class","onClick"]),e.stateStore.nodeQueryList_ip_duplicates.includes(l.ip)?(n(),c(S,{key:0,color:"red"},{default:a(()=>[m(" Duplicate!")]),_:1})):p("",!0)]),s("td",null,f(l.mcu_version),1),s("td",null,f(l.fw_build),1),s("td",null,f(l.mac),1)]))),128))])]),_:1})]),_:1})}const W=w(D,[["render",j],["__scopeId","data-v-a2cccab4"]]);export{W as default};
