import{_ as C,G as k,H as t,I as i,J as a,B as n,O as l,U as p,P as s,N as _,S as V,F as w,$ as L,R as m,Y as g,Z as N}from"./index-b5bbddcf.js";import{V as x}from"./VContainer-e3fc7b69.js";import{V as D}from"./VRow-e33230e9.js";import{V as h}from"./VCol-d6347710.js";import{i as f,p as I}from"./VBtn-ce96676d.js";import{V as U}from"./VTable-f0bbdffd.js";import{V as R}from"./VChip-e3b64dfa.js";import"./VIcon-58bb90d8.js";import"./index-23450c46.js";import"./VAvatar-7261f278.js";const B={name:"DeviceList",components:{},setup(){return{stateStore:k()}},data:()=>({showSave:!1}),computed:{},methods:{async saveDeviceList(){const e="192.168.1.173:3000";let y=[];this.stateStore.nodeQueryList_dump.forEach((c,o)=>{if(c.is_host=="n"){let d={rxId:c.ip,name:"",zoneId:"",zone:"",vwName:"",vwType:""};this.stateStore.rxAssignments.some(u=>u.rxId===d.rxId)||this.rxAssignments.push(d)}else if(c.is_host=="y"){let d={txId:c.ip,name:`Video${o+1}`};y.push(d)}}),await fetch(`http://${e}/write/UserTvNames/${JSON.stringify(this.stateStore.rxAssignments)}`),await fetch(`http://${e}/write/UserInputNames/${JSON.stringify(y)}`),this.$router.push("/")},cancel:function(){this.$router.push("/")}},async created(){this.stateStore.showSideMenu=!1,this.stateStore.get_UserTvNames(),await this.stateStore.getNodeQuery(),this.showSave=!0},beforeUnmount(){}},$=e=>(g("data-v-c2a77789"),e=e(),N(),e),Q=$(()=>s("thead",null,[s("tr",null,[s("th",null,"Device IP"),s("th",null,"MCU Version"),s("th",null,"Firmware Build"),s("th",null,"MAC")])],-1)),T=["onClick"],b=["onClick"];function A(e,y,c,o,d,u){return t(),i(x,{id:"myContainer",fluid:"",class:"fill-height"},{default:a(()=>[e.showSave?(t(),i(D,{key:0,class:"ma-3"},{default:a(()=>[n(h,{class:"myCols"}),o.stateStore.nodeQueryList_ip_duplicates.length!=0?(t(),i(h,{key:0,class:"myCols text-red"},{default:a(()=>[l(" 1. Remove duplicate devices as indicated 2. Repeat Device List Scan ")]),_:1})):(t(),i(h,{key:1})),n(h,{class:"myCols d-flex justify-end"},{default:a(()=>[n(f,{class:"mx-3",onClick:u.cancel,color:"red"},{default:a(()=>[l("Cancel")]),_:1},8,["onClick"]),o.stateStore.nodeQueryList_ip_duplicates.length==0?(t(),i(f,{key:0,class:"mx-3",onClick:u.saveDeviceList,color:"primary"},{default:a(()=>[l("SAVE")]),_:1},8,["onClick"])):p("",!0)]),_:1})]),_:1})):p("",!0),o.stateStore.showProgress?(t(),i(I,{key:1,id:"progress",indeterminate:"","model-value":"20",size:80})):p("",!0),n(U,{id:"device-table"},{default:a(()=>[Q,s("tbody",null,[(t(!0),_(w,null,V(o.stateStore.nodeQueryList_dump,(r,v)=>(t(),_("tr",{key:v},[s("td",{class:L(["is_receiver",{is_host:r.is_host=="y"}])},[l(m(r.ip)+" ",1),o.stateStore.nodeQueryList_ip_duplicates.includes(r.ip)?(t(),i(R,{key:0,color:"red"},{default:a(()=>[l(" Duplicate!")]),_:1})):p("",!0)],2),s("td",null,m(r.mcu_version),1),s("td",null,m(r.fw_build),1),s("td",null,m(r.mac),1),r.is_host=="y"?(t(),_("td",{key:0,onClick:S=>e.openURL(e.deviceListDump[v].ip)},[n(f,null,{default:a(()=>[l("TX")]),_:1})],8,T)):(t(),_("td",{key:1,onClick:S=>e.openURL(e.deviceListDump[v].ip)},[n(f,null,{default:a(()=>[l("RX")]),_:1})],8,b))]))),128))])]),_:1})]),_:1})}const H=C(B,[["render",A],["__scopeId","data-v-c2a77789"]]);export{H as default};
