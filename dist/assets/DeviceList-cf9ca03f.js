import{_ as C,G as g,H as a,I as l,J as e,P as t,B as u,O as n,W as _,R as p,N as f,V as L,F as V,$ as w,S as N,U as I}from"./index-43e29651.js";import{V as D}from"./VContainer-3fe04e38.js";import{V as R}from"./VRow-240d0fe2.js";import{V as h}from"./VCol-5016249c.js";import{g as m}from"./VBtn-91d3c490.js";import{V as k}from"./VChip-ecbf664d.js";import{b as U}from"./VProgressCircular-4c1d2d30.js";import{V as b}from"./VTable-0bdb4713.js";import"./index-fac28753.js";import"./VAvatar-f523acaf.js";import"./transition-f38ebb48.js";const Q={name:"DeviceList",components:{},setup(){return{stateStore:g()}},data:()=>({showSave:!1}),computed:{},methods:{rescan(){location.reload()},async saveDeviceList(){const r=this.stateStore.serverURL;let y=[];this.stateStore.nodeQueryList_dump.forEach((d,o)=>{if(d.is_host=="n"){let c={rxId:d.ip,name:"",zoneId:"",zone:"",vwName:"",vwType:""};this.stateStore.rxAssignments.some(i=>i.rxId===c.rxId)||this.stateStore.rxAssignments.push(c)}else if(d.is_host=="y"){let c={txId:d.ip,name:`Video${o+1}`};y.push(c)}}),await this.stateStore.rxAssignments.sort((d,o)=>{const c=d.rxId.split(".").map(Number),i=o.rxId.split(".").map(Number);for(let s=0;s<4;s++)if(c[s]!==i[s])return c[s]-i[s];return 0}),await fetch(`http://${r}/write/UserTvNames/${JSON.stringify(this.stateStore.rxAssignments)}`),await fetch(`http://${r}/write/UserInputNames/${JSON.stringify(y)}`),this.$router.push("/")},cancel:function(){this.$router.push("/")}},async created(){this.stateStore.showSideMenu=!1,await this.stateStore.getNodeQuery(),this.stateStore.get_UserTvNames(),this.showSave=!0},beforeUnmount(){}},S=r=>(N("data-v-ec09389d"),r=r(),I(),r),B={class:"d-flex justify-start my-3"},j=S(()=>t("div",{class:"d-flex justify-center"}," 1. Remove duplicate devices as indicated ",-1)),A=S(()=>t("div",{class:"d-flex justify-center"}," 2. Repeat Device List Scan ",-1)),T={class:"d-flex justify-center my-3"},z=S(()=>t("thead",null,[t("tr",null,[t("th",null,"Device IP"),t("th",null,"MCU Version"),t("th",null,"Firmware Build"),t("th",null,"MAC")])],-1)),P=["onClick"],X=["onClick"];function E(r,y,d,o,c,i){return a(),l(D,{id:"myContainer",fluid:""},{default:e(()=>[r.showSave?(a(),l(R,{key:0,class:"mx-3"},{default:e(()=>[o.stateStore.nodeQueryList_ip_duplicates.length==0?(a(),l(h,{key:0},{default:e(()=>[t("div",B,[u(m,{onClick:i.rescan,color:"primary"},{default:e(()=>[n("ReScan")]),_:1},8,["onClick"])])]),_:1})):_("",!0),o.stateStore.nodeQueryList_ip_duplicates.length!=0?(a(),l(h,{key:1,class:"d-flex flex-column justify-center text-red"},{default:e(()=>[j,A,t("div",T,[o.stateStore.nodeQueryList_ip_duplicates.length!=0?(a(),l(m,{key:0,class:"mx-3",onClick:i.rescan,color:"primary"},{default:e(()=>[n("ReScan")]),_:1},8,["onClick"])):_("",!0)])]),_:1})):(a(),l(h,{key:2,class:"d-flex justify-center"},{default:e(()=>[u(k,{color:"orange"},{default:e(()=>[n("TX + RX found = "+p(o.stateStore.nodeQueryList_dump.length),1)]),_:1})]),_:1})),u(h,{class:"myCols d-flex justify-end"},{default:e(()=>[u(m,{class:"mx-3",onClick:i.cancel,color:"red"},{default:e(()=>[n("Cancel")]),_:1},8,["onClick"]),o.stateStore.nodeQueryList_ip_duplicates.length==0?(a(),l(m,{key:0,class:"mx-3",onClick:i.saveDeviceList,color:"primary"},{default:e(()=>[n("SAVE")]),_:1},8,["onClick"])):_("",!0)]),_:1})]),_:1})):_("",!0),o.stateStore.showProgress?(a(),l(U,{key:1,id:"progress",indeterminate:"","model-value":"20",size:80,color:"blue"})):_("",!0),u(b,{id:"device-table"},{default:e(()=>[z,t("tbody",null,[(a(!0),f(V,null,L(o.stateStore.nodeQueryList_dump,(s,v)=>(a(),f("tr",{key:v},[t("td",{class:w(["is_receiver",{is_host:s.is_host=="y"}])},[n(p(s.ip)+" ",1),o.stateStore.nodeQueryList_ip_duplicates.includes(s.ip)?(a(),l(k,{key:0,color:"red"},{default:e(()=>[n(" Duplicate!")]),_:1})):_("",!0)],2),t("td",null,p(s.mcu_version),1),t("td",null,p(s.fw_build),1),t("td",null,p(s.mac),1),s.is_host=="y"?(a(),f("td",{key:0,onClick:x=>r.openURL(r.deviceListDump[v].ip)},[u(m,null,{default:e(()=>[n("TX")]),_:1})],8,P)):(a(),f("td",{key:1,onClick:x=>r.openURL(r.deviceListDump[v].ip)},[u(m,null,{default:e(()=>[n("RX")]),_:1})],8,X))]))),128))])]),_:1})]),_:1})}const Z=C(Q,[["render",E],["__scopeId","data-v-ec09389d"]]);export{Z as default};
