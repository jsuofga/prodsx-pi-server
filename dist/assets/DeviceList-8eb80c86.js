import{_ as C,G as V,H as s,I as r,J as a,B as n,P as e,O as l,W as p,N as h,V as x,F as L,$ as w,R as m,S as g,U as N}from"./index-50471abb.js";import{V as D}from"./VContainer-98aeb250.js";import{V as I}from"./VRow-c628f82b.js";import{V as f}from"./VCol-4aae2a6f.js";import{h as _,p as b}from"./VBtn-d24c2518.js";import{V as R}from"./VTable-d65314bf.js";import{V as U}from"./VChip-3072ec40.js";import"./VIcon-7211f5fe.js";import"./index-2d17b3c4.js";import"./VAvatar-9722b630.js";import"./transition-c84aa93e.js";const B={name:"DeviceList",components:{},setup(){return{stateStore:V()}},data:()=>({showSave:!1}),computed:{},methods:{rescan(){location.reload()},async saveDeviceList(){const t=this.stateStore.serverURL;let y=[];this.stateStore.nodeQueryList_dump.forEach((c,o)=>{if(c.is_host=="n"){let d={rxId:c.ip,name:"",zoneId:"",zone:"",vwName:"",vwType:""};this.stateStore.rxAssignments.some(u=>u.rxId===d.rxId)||this.stateStore.rxAssignments.push(d)}else if(c.is_host=="y"){let d={txId:c.ip,name:`Video${o+1}`};y.push(d)}}),await fetch(`http://${t}/write/UserTvNames/${JSON.stringify(this.stateStore.rxAssignments)}`),await fetch(`http://${t}/write/UserInputNames/${JSON.stringify(y)}`),this.$router.push("/")},cancel:function(){this.$router.push("/")}},async created(){this.stateStore.showSideMenu=!1,await this.stateStore.getNodeQuery(),this.stateStore.get_UserTvNames(),this.showSave=!0},beforeUnmount(){}},S=t=>(g("data-v-b57010ab"),t=t(),N(),t),Q=S(()=>e("div",{class:"d-flex justify-center"}," 1. Remove duplicate devices as indicated ",-1)),T=S(()=>e("div",{class:"d-flex justify-center"}," 2. Repeat Device List Scan ",-1)),j={class:"d-flex justify-center my-3"},A=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Device IP"),e("th",null,"MCU Version"),e("th",null,"Firmware Build"),e("th",null,"MAC")])],-1)),$=["onClick"],z=["onClick"];function P(t,y,c,o,d,u){return s(),r(D,{id:"myContainer",fluid:""},{default:a(()=>[t.showSave?(s(),r(I,{key:0,class:"mx-3"},{default:a(()=>[n(f),o.stateStore.nodeQueryList_ip_duplicates.length!=0?(s(),r(f,{key:0,class:"d-flex flex-column justify-center text-red"},{default:a(()=>[Q,T,e("div",j,[o.stateStore.nodeQueryList_ip_duplicates.length!=0?(s(),r(_,{key:0,class:"mx-3",onClick:u.rescan,color:"primary"},{default:a(()=>[l("ReScan")]),_:1},8,["onClick"])):p("",!0)])]),_:1})):(s(),r(f,{key:1})),n(f,{class:"myCols d-flex justify-end"},{default:a(()=>[n(_,{class:"mx-3",onClick:u.cancel,color:"red"},{default:a(()=>[l("Cancel")]),_:1},8,["onClick"]),o.stateStore.nodeQueryList_ip_duplicates.length==0?(s(),r(_,{key:0,class:"mx-3",onClick:u.saveDeviceList,color:"primary"},{default:a(()=>[l("SAVE")]),_:1},8,["onClick"])):p("",!0)]),_:1})]),_:1})):p("",!0),o.stateStore.showProgress?(s(),r(b,{key:1,id:"progress",indeterminate:"","model-value":"20",size:80})):p("",!0),n(R,{id:"device-table"},{default:a(()=>[A,e("tbody",null,[(s(!0),h(L,null,x(o.stateStore.nodeQueryList_dump,(i,v)=>(s(),h("tr",{key:v},[e("td",{class:w(["is_receiver",{is_host:i.is_host=="y"}])},[l(m(i.ip)+" ",1),o.stateStore.nodeQueryList_ip_duplicates.includes(i.ip)?(s(),r(U,{key:0,color:"red"},{default:a(()=>[l(" Duplicate!")]),_:1})):p("",!0)],2),e("td",null,m(i.mcu_version),1),e("td",null,m(i.fw_build),1),e("td",null,m(i.mac),1),i.is_host=="y"?(s(),h("td",{key:0,onClick:k=>t.openURL(t.deviceListDump[v].ip)},[n(_,null,{default:a(()=>[l("TX")]),_:1})],8,$)):(s(),h("td",{key:1,onClick:k=>t.openURL(t.deviceListDump[v].ip)},[n(_,null,{default:a(()=>[l("RX")]),_:1})],8,z))]))),128))])]),_:1})]),_:1})}const Y=C(B,[["render",P],["__scopeId","data-v-b57010ab"]]);export{Y as default};
