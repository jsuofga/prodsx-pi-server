import{_ as C,G as x,H as s,I as r,J as a,B as n,P as e,O as l,W as _,N as h,V as L,F as V,$ as w,R as f,S as g,U as N}from"./index-50cd1b44.js";import{V as D}from"./VContainer-b9f83836.js";import{i as I,h as p,q as R}from"./VRow-86b7f682.js";import{V as m}from"./VCol-2d24ae97.js";import{V as U}from"./VTable-e7b0ce6f.js";import{V as B}from"./VChip-906da653.js";import"./index-e094680a.js";import"./VAvatar-c58084ff.js";import"./VImg-8aca7429.js";const Q={name:"DeviceList",components:{},setup(){return{stateStore:x()}},data:()=>({showSave:!1}),computed:{},methods:{rescan(){location.reload()},async saveDeviceList(){const t=this.stateStore.serverURL;let y=[];this.stateStore.nodeQueryList_dump.forEach((c,o)=>{if(c.is_host=="n"){let d={rxId:c.ip,name:"",zoneId:"",zone:"",vwName:"",vwType:""};this.stateStore.rxAssignments.some(u=>u.rxId===d.rxId)||this.stateStore.rxAssignments.push(d)}else if(c.is_host=="y"){let d={txId:c.ip,name:`Video${o+1}`};y.push(d)}}),await fetch(`http://${t}/write/UserTvNames/${JSON.stringify(this.stateStore.rxAssignments)}`),await fetch(`http://${t}/write/UserInputNames/${JSON.stringify(y)}`),this.$router.push("/")},cancel:function(){this.$router.push("/")}},async created(){this.stateStore.showSideMenu=!1,await this.stateStore.getNodeQuery(),this.stateStore.get_UserTvNames(),this.showSave=!0},beforeUnmount(){}},S=t=>(g("data-v-1e23a84f"),t=t(),N(),t),T=S(()=>e("div",{class:"d-flex justify-center"}," 1. Remove duplicate devices as indicated ",-1)),b=S(()=>e("div",{class:"d-flex justify-center"}," 2. Repeat Device List Scan ",-1)),j={class:"d-flex justify-center my-3"},A=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Device IP"),e("th",null,"MCU Version"),e("th",null,"Firmware Build"),e("th",null,"MAC")])],-1)),$=["onClick"],z=["onClick"];function P(t,y,c,o,d,u){return s(),r(D,{id:"myContainer",fluid:""},{default:a(()=>[t.showSave?(s(),r(I,{key:0,class:"mx-3"},{default:a(()=>[n(m),o.stateStore.nodeQueryList_ip_duplicates.length!=0?(s(),r(m,{key:0,class:"d-flex flex-column justify-center text-red"},{default:a(()=>[T,b,e("div",j,[o.stateStore.nodeQueryList_ip_duplicates.length!=0?(s(),r(p,{key:0,class:"mx-3",onClick:u.rescan,color:"primary"},{default:a(()=>[l("ReScan")]),_:1},8,["onClick"])):_("",!0)])]),_:1})):(s(),r(m,{key:1})),n(m,{class:"myCols d-flex justify-end"},{default:a(()=>[n(p,{class:"mx-3",onClick:u.cancel,color:"red"},{default:a(()=>[l("Cancel")]),_:1},8,["onClick"]),o.stateStore.nodeQueryList_ip_duplicates.length==0?(s(),r(p,{key:0,class:"mx-3",onClick:u.saveDeviceList,color:"primary"},{default:a(()=>[l("SAVE")]),_:1},8,["onClick"])):_("",!0)]),_:1})]),_:1})):_("",!0),o.stateStore.showProgress?(s(),r(R,{key:1,id:"progress",indeterminate:"","model-value":"20",size:80})):_("",!0),n(U,{id:"device-table"},{default:a(()=>[A,e("tbody",null,[(s(!0),h(V,null,L(o.stateStore.nodeQueryList_dump,(i,v)=>(s(),h("tr",{key:v},[e("td",{class:w(["is_receiver",{is_host:i.is_host=="y"}])},[l(f(i.ip)+" ",1),o.stateStore.nodeQueryList_ip_duplicates.includes(i.ip)?(s(),r(B,{key:0,color:"red"},{default:a(()=>[l(" Duplicate!")]),_:1})):_("",!0)],2),e("td",null,f(i.mcu_version),1),e("td",null,f(i.fw_build),1),e("td",null,f(i.mac),1),i.is_host=="y"?(s(),h("td",{key:0,onClick:k=>t.openURL(t.deviceListDump[v].ip)},[n(p,null,{default:a(()=>[l("TX")]),_:1})],8,$)):(s(),h("td",{key:1,onClick:k=>t.openURL(t.deviceListDump[v].ip)},[n(p,null,{default:a(()=>[l("RX")]),_:1})],8,z))]))),128))])]),_:1})]),_:1})}const W=C(Q,[["render",P],["__scopeId","data-v-1e23a84f"]]);export{W as default};
