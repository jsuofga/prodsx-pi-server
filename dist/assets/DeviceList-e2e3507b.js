import{_ as C,G as V,H as s,I as r,J as a,B as n,P as e,O as l,W as _,N as m,V as x,F as L,$ as g,R as h,S as w,U as N}from"./index-317f65a8.js";import{V as b}from"./VContainer-0a6ebad7.js";import{V as D}from"./VRow-f9277a33.js";import{V as f}from"./VCol-8cc83e06.js";import{g as p}from"./VBtn-573d62a6.js";import{b as I}from"./VProgressCircular-944c6dd3.js";import{V as R}from"./VTable-3fc5e79f.js";import{V as U}from"./VChip-5ab5aa70.js";import"./index-ac20c1a2.js";import"./VAvatar-b6cfd238.js";import"./transition-e6ac4814.js";const B={name:"DeviceList",components:{},setup(){return{stateStore:V()}},data:()=>({showSave:!1}),computed:{},methods:{rescan(){location.reload()},async saveDeviceList(){const t=this.stateStore.serverURL;let y=[];this.stateStore.nodeQueryList_dump.forEach((c,o)=>{if(c.is_host=="n"){let d={rxId:c.ip,name:"",zoneId:"",zone:"",vwName:"",vwType:""};this.stateStore.rxAssignments.some(u=>u.rxId===d.rxId)||this.stateStore.rxAssignments.push(d)}else if(c.is_host=="y"){let d={txId:c.ip,name:`Video${o+1}`};y.push(d)}}),await fetch(`http://${t}/write/UserTvNames/${JSON.stringify(this.stateStore.rxAssignments)}`),await fetch(`http://${t}/write/UserInputNames/${JSON.stringify(y)}`),this.$router.push("/")},cancel:function(){this.$router.push("/")}},async created(){this.stateStore.showSideMenu=!1,await this.stateStore.getNodeQuery(),this.stateStore.get_UserTvNames(),this.showSave=!0},beforeUnmount(){}},S=t=>(w("data-v-b57010ab"),t=t(),N(),t),Q=S(()=>e("div",{class:"d-flex justify-center"}," 1. Remove duplicate devices as indicated ",-1)),T=S(()=>e("div",{class:"d-flex justify-center"}," 2. Repeat Device List Scan ",-1)),j={class:"d-flex justify-center my-3"},A=S(()=>e("thead",null,[e("tr",null,[e("th",null,"Device IP"),e("th",null,"MCU Version"),e("th",null,"Firmware Build"),e("th",null,"MAC")])],-1)),$=["onClick"],z=["onClick"];function P(t,y,c,o,d,u){return s(),r(b,{id:"myContainer",fluid:""},{default:a(()=>[t.showSave?(s(),r(D,{key:0,class:"mx-3"},{default:a(()=>[n(f),o.stateStore.nodeQueryList_ip_duplicates.length!=0?(s(),r(f,{key:0,class:"d-flex flex-column justify-center text-red"},{default:a(()=>[Q,T,e("div",j,[o.stateStore.nodeQueryList_ip_duplicates.length!=0?(s(),r(p,{key:0,class:"mx-3",onClick:u.rescan,color:"primary"},{default:a(()=>[l("ReScan")]),_:1},8,["onClick"])):_("",!0)])]),_:1})):(s(),r(f,{key:1})),n(f,{class:"myCols d-flex justify-end"},{default:a(()=>[n(p,{class:"mx-3",onClick:u.cancel,color:"red"},{default:a(()=>[l("Cancel")]),_:1},8,["onClick"]),o.stateStore.nodeQueryList_ip_duplicates.length==0?(s(),r(p,{key:0,class:"mx-3",onClick:u.saveDeviceList,color:"primary"},{default:a(()=>[l("SAVE")]),_:1},8,["onClick"])):_("",!0)]),_:1})]),_:1})):_("",!0),o.stateStore.showProgress?(s(),r(I,{key:1,id:"progress",indeterminate:"","model-value":"20",size:80})):_("",!0),n(R,{id:"device-table"},{default:a(()=>[A,e("tbody",null,[(s(!0),m(L,null,x(o.stateStore.nodeQueryList_dump,(i,v)=>(s(),m("tr",{key:v},[e("td",{class:g(["is_receiver",{is_host:i.is_host=="y"}])},[l(h(i.ip)+" ",1),o.stateStore.nodeQueryList_ip_duplicates.includes(i.ip)?(s(),r(U,{key:0,color:"red"},{default:a(()=>[l(" Duplicate!")]),_:1})):_("",!0)],2),e("td",null,h(i.mcu_version),1),e("td",null,h(i.fw_build),1),e("td",null,h(i.mac),1),i.is_host=="y"?(s(),m("td",{key:0,onClick:k=>t.openURL(t.deviceListDump[v].ip)},[n(p,null,{default:a(()=>[l("TX")]),_:1})],8,$)):(s(),m("td",{key:1,onClick:k=>t.openURL(t.deviceListDump[v].ip)},[n(p,null,{default:a(()=>[l("RX")]),_:1})],8,z))]))),128))])]),_:1})]),_:1})}const Y=C(B,[["render",P],["__scopeId","data-v-b57010ab"]]);export{Y as default};
